# Getting Started

## Enviorment prepration
- node >= 8.0.0

## Install node packages
```sh
$ yarn
```

## Build
```sh
$ yarn build
```

## Run
```sh
$ yarn start
```

## Run application with online mock API
Go to src/api/index.js, comment import api.json, and use mockAPi.json.
```js
    import Fetch from '../utils/fetch';
    // import api from './api.json';
    import api from './mockApi.json';
```

# Developer Guide

Before start, please read this basic guideline as first step.

## Routing
We are using gatsby-plugin-page-creator to generate pages, js files under src/pages will turn into pages automatically but some of the files/folders are excluded.

Custom ignore patterns: [`**/components/**`]
Default igonre patterns: [`template-*`, `__tests__/*`, `*.test.jsx?`, `*.spec.jsx?`, `*.d.tsx?`, `*.json`, `*.yaml`, `_*`, `.*`]
Based on this rule, you can write styles.js, *.test.js and your own components under 'components' folder without worrying those files would be turned into pages.


## Paths & Imports

There are few basic rules for importing files.

```js
//import node modules from third party libs as first part
import React, { useState, useEffect } from 'react';
import { navigate } from 'gatsby';
import Grid from '@material-ui/core/Grid';

//import internal components as second part
import Hearder from '/components/Header';
import Footer from '/components/Footer';

//import internal functional(sagas/actions/reducers/actiontypes) as third part
import { requestLogin } from '../../../actions';

//import mockup data as fourth part
import loginMock from ../mocks/loginMock.json';
```
Do not add any files into ./public or ./.cache folder as those folders are functional and generated by gatsby.js. Instead, please use static folder as an assets collection.

## Fetching Data

We are using Redux-Saga and fetch for data retrieving, and there are few rules for your references.

Our cross-origin solution for develop is Webpack proxy. You can change the proxy settings at gatsby-config.js.
```js
//here's proxy settings
developMiddleware: app => {
    app.use(
      '/api',
      proxy({
        target: 'http://localhost:8080'
      })
    );
  },
```

```js
//The output of login url will be: http://localhost:8000/api/travel/applicant:search
//The final request url after webpack proxy: http://localhost:8080/api/travel/applicant:search
Use Fetch from utils instead of "whatwg-fetch".
import Fetch from '/utils/fetch';
...
Fetch.get(url);
Fetch.put(url, postbody);
Fetch.post(url, postbody, additionalHeader);
```
